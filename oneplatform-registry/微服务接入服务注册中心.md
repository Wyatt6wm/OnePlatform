# 微服务接入服务注册中心

`pom.xml`引入依赖：

```xml
<!-- Spring Boot Actuator服务注册和服务监控都用到 -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
<!-- 服务注册中心客户端  -->
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-consul-discovery</artifactId>
</dependency>
```

`application.yaml`添加全局配置：

```yaml
spring:
  application:
    name: oneplatform-user
```

`application-dev.yaml`和`application-run.yaml`添加服务注册中心服务器的配置：

```yaml
# 测试环境application-dev.yaml
spring:
  cloud:
    # 服务注册
    consul:
      host: localhost
      port: 8500
      discovery:
        serviceName: ${spring.application.name}

# 生产环境application-run.yaml
spring:
  cloud:
    # 服务注册
    consul:
      host: oneplatform-registry
      port: 8500
      discovery:
        serviceName: ${spring.application.name}
```


# OnePlatform接口文档

## 1. 服务网关面向前端开放的接口

### 1.1. 接口规范定义

#### 1.1.1. 前后端接口格式定义

请求接口：

```json

```

响应接口：

```json
{
    "succ": true,
    "mesg": "响应信息",
    "data": {}
}
```

### 1.2. oneplatform-user用户中心

#### 1.2.1. 获取验证码

- 请求路径：/api/getKaptcha
- 请求方法：get
- 请求参数：无
- 响应数据：验证码图片（image/jpeg）

#### 1.2.2. 登录认证授权

- 请求路径：/api/login
- 请求方法：post
- 请求参数

| 参数       | 说明   | 备注                                                         |
| ---------- | ------ | ------------------------------------------------------------ |
| username   | 用户名 | 由大写英文字母、小写英文字母和数字组成，长度不大于16位。     |
| password   | 密码   | 由大写英文字母、小写英文字母、数字和特殊字符`.~!@#$%^&*_?`组成，长度8位~16位。前端不加密，后端加密盐MD5加密。 |
| verifyCode | 验证码 |                                                              |

- 响应数据

##### 认证成功

```json
{
    "succ": true,
    "mesg": "认证成功",
    "data": {
        "token": "d8c6ed7a3fd446e4a477b20d1ce9cda0",
        "tokenExpiredTime": "2024-06-01T09:21:53.102+00:00",
        "roles": [
        	"角色1",
            "角色2"
        ],
        "permissions": [
            "端:页面:权限名1",
            "端:页面:权限名2",
            "端:接口:权限名1"，
            "端:接口:权限名2"
        ]
    }
}
```

##### 认证失败：验证码错误

```json
{
    "succ": false,
    "mesg": "验证码错误",
}
```

##### 认证失败：用户名或密码错误

```json
{
    "succ": false,
    "mesg": "用户名或密码错误"
}
```

##### 认证失败：账号状态异常（待开发）

#### 1.2.3. 获取个人信息

（待开发）

- 请求路径：/api/getProfile
- 请求方法：get
- 请求参数
- 响应数据

#### 1.2.4. 退出登录

- 请求路径：/api/logout
- 请求方法：get
- 请求参数：无
- 响应数据

##### 退出登录成功

```json
{
    "succ": true,
    "mesg": "退出登录成功"
}
```

##### 未登录

可能由于token过期等原因导致用户处于未登录状态，此时也视为退出登录成功。

```json
{
    "succ": true,
    "mesg": "未登录"
}
```

## 2. OnePlatform内部微服务接口




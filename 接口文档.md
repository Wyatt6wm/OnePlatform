# OnePlatform接口文档

## 1. 服务网关面向前端开放的接口

### 1.1. 接口规范定义

#### 1.1.1. 前后端接口格式定义

请求接口：

```json

```

响应接口：

```json
{
    "succ": true,
    "mesg": "响应信息",
    "data": {}
}
```

#### 1.1.2. JWT规范定义

JWT 由三部分组成：`header`.`payload`.`signature`，以下也定义了每部分所包含的内容

```json
{
    "header": {
        "alg": "HS256",
        "typ": "JWT"
    },
    "payload": {
        "sub": "d8c6ed7a3fd446e4a477b20d1ce9cda0",
        "exp": "2024-06-01T09:21:53.102+00:00"
    },
    "signature"
}
```

### 1.2. oneplatform-user用户中心

#### 1.2.1. 获取验证码

- 请求路径：/api/kaptcha
- 请求方法：get
- 请求参数：无
- 响应数据：验证码图片（image/jpeg）

#### 1.2.2. 登录认证授权

- 请求路径：/api/login
- 请求方法：post
- 请求参数

| 参数       | 说明   | 备注                                                         |
| ---------- | ------ | ------------------------------------------------------------ |
| username   | 用户名 | 由大写英文字母、小写英文字母和数字组成，长度不大于16位。     |
| password   | 密码   | 由大写英文字母、小写英文字母、数字和特殊字符`.~!@#$%^&*_?`组成，长度8位~16位。前端不加密，后端加密盐MD5加密。 |
| verifyCode | 验证码 |                                                              |

- 响应数据

##### 认证成功

```json
{
    "succ": true,
    "mesg": "认证成功",
    "data": {
        "token": "",
        "tokenExpiredTime": "2024-06-01T09:21:53.102+00:00",
        "permission": {
            "端标识符1": {
                "view": [
                    "页面查看权限1",
                    "页面查看权限2"
                ],
                "api": [
                    "接口访问权限1",
                    "接口访问权限2"
                ]
            },
            "端标识符2": {
                "view": [],
                "api": []
            }
        }
    }
}
```

##### 认证失败：验证码错误

```json
{
    "succ": false,
    "mesg": "验证码错误",
}
```

##### 认证失败：账户或密码不正确

```json
{
    "succ": false,
    "mesg": "账户或密码不正确"
}
```

##### 认证失败：账号状态异常（待开发）

#### 1.2.3. 获取个人信息 003

（待开发）

## 2. OnePlatform内部微服务接口



